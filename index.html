
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>풍선 메시지</title>
    <style>
        body {
            background: linear-gradient(to top, #d0eaff, #ffffff);
            overflow: hidden;
            font-family: sans-serif;
        }
        .balloon {
            position: absolute;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 25px;
            animation: floatUp 30s linear forwards;
            font-size: 1rem;
            color: #333;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        @keyframes floatUp {
            0% { bottom: -50px; opacity: 0; }
            10% { opacity: 1; }
            100% { bottom: 100vh; opacity: 0; }
        }
    </style>
</head>
<body>
<script>
const sheetId = "1FUDbQsDeZBg8Pn7_ngzsk8OgB7fRZiIaIQi4eb-azQs";
const sheetName = "Form Responses 1";
const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:csv&sheet=${sheetName}`;

function createBalloon(text) {
    const div = document.createElement('div');
    div.className = 'balloon';
    div.style.left = Math.random() * 80 + '%';
    div.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 90%)`;
    div.textContent = text;
    document.body.appendChild(div);
    setTimeout(() => div.remove(), 30000);
}

async function fetchMessages() {
    try {
        const res = await fetch(url);
        const data = await res.text();
        const rows = data.trim().split("\n").slice(1); // Skip header
        const latest = rows.slice(-10); // Show recent 10 messages
        for (const row of latest) {
            const cols = row.split(",");
            const message = cols[1] || "";
            const name = cols[2] || "";
            if (message) createBalloon(`${message} — ${name}`);
        }
    } catch (e) {
        console.error("데이터를 불러오지 못했습니다.", e);
    }
}

setInterval(fetchMessages, 10000);
fetchMessages();
</script>
</body>
</html>
    